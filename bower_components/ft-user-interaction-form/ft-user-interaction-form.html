<html><head><link rel="import" href="../polymer/polymer.html">

<link rel="import" href="../iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../iron-label/iron-label.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../paper-checkbox/paper-checkbox.html">
  
<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../paper-item/paper-item.html">
<link rel="import" href="../paper-listbox/paper-listbox.html">
<link rel="import" href="../paper-material/paper-material.html">
<link rel="import" href="../paper-radio-button/paper-radio-button.html">
<link rel="import" href="../paper-radio-group/paper-radio-group.html">



</head><body><dom-module id="ft-user-interaction-form">

    <style include="iron-flex iron-flex-alignment"></style>

    <template>

        
        <div id="form" on-button-clicked="_onButtonClicked" on-entered-data-changed="_onEnteredDataChanged">
        </div>

    </template>


    

    
    <script>function InteractionRequestParser_2_0_0(){this.generator=null}InteractionRequestParser_2_0_0.prototype.parse=function(e,t){this.generator=t,this.generator.begin(),this.parseTitle(e);for(var r=e["2.0.0"].parts.length,a=0;a<r;a++){var i=e["2.0.0"].parts[a];switch(i.kind){case"static-text":this.parseStaticText(e,i);break;case"text-input":this.parseTextInput(e,i);break;case"choices":this.parseChoices(e,i)}}this.generator.end()},InteractionRequestParser_2_0_0.prototype.parseTitle=function(e){var t=e["2.0.0"].title;this.generator.generateTitle(t)},InteractionRequestParser_2_0_0.prototype.parseStaticText=function(e,t){var r=t.id,a=t.text;this.generator.generateStaticText(r,a)},InteractionRequestParser_2_0_0.prototype.parseTextInput=function(e,t){var r=t.id,a=t.label,i=t.sensitive;this.generator.generateTextInput(r,a,i)},InteractionRequestParser_2_0_0.prototype.parseChoices=function(e,t){var r=t.id,a=t.label,i=t.suggestedWidgetType,s=null;void 0!==t.defaultChoiceId&&(s=t.defaultChoiceId);for(var n=[],o=t.choices.length,c=0;c<o;c++){var p=t.choices[c],h=p.id,u=p.label;n.push({id:h,label:u})}this.generator.generateChoices(r,a,n,s,i)};</script>


    
    <script>function InteractionFormGenerator_2_0_0(t,e,o,n){this.polymer=t,this.rootView=e,this.widgetMap=o,this.maxWidth=n,this.commitButton=null}InteractionFormGenerator_2_0_0.prototype.getResponse=function(){return this.response},InteractionFormGenerator_2_0_0.prototype.clear=function(){this.rootView.removeEventListener("keyup",this.onKeyUp.bind(this)),this.rootView.removeEventListener("paper-radio-group-changed",this.onPaperRadioGroupChanged.bind(this)),this.rootView.removeEventListener("change",this.onChange.bind(this)),this.cancelButton&&(this.cancelButton=null),this.commitButton&&(this.commitButton=null);for(var t=Polymer.dom(this.rootView).lastChild;null!=t;t=Polymer.dom(this.rootView).lastChild)Polymer.dom(this.rootView).removeChild(t);Polymer.dom.flush();for(var e in this.widgetMap)this.widgetMap.hasOwnProperty(e)&&delete this.widgetMap[e]},InteractionFormGenerator_2_0_0.prototype.begin=function(){this.clear(),this.generating=!0,this.rootView.addEventListener("keyup",this.onKeyUp.bind(this)),this.rootView.addEventListener("paper-radio-group-changed",this.onPaperRadioGroupChanged.bind(this)),this.rootView.addEventListener("change",this.onChange.bind(this)),this.rootView.style.minWidth="300px",this.rootView.style.padding="16px"},InteractionFormGenerator_2_0_0.prototype.end=function(){var t=document.createElement("div");Polymer.dom(this.rootView).appendChild(t),this.polymer.toggleClass("layout",!0,t),this.polymer.toggleClass("horizontal",!0,t),t.style.width="100%",t.style.paddingTop="20px";var e=document.createElement("div");Polymer.dom(t).appendChild(e),e.style.width="100%";var o=document.createElement("paper-button");o.addEventListener("click",this.onButtonClicked.bind(this,!0)),Polymer.dom(t).appendChild(o),o.raised=!0,o.style.width="60px",o.style.height="36px",o.style.background="white",Polymer.dom(o).textContent="Cancel",this.cancelButton=o;var n=document.createElement("div");Polymer.dom(t).appendChild(n),n.style.width="20px";var r=document.createElement("paper-button");r.addEventListener("click",this.onButtonClicked.bind(this,!1)),Polymer.dom(t).appendChild(r),r.raised=!0,r.style.width="60px",r.style.height="36px",r.style.background="white",Polymer.dom(r).textContent="OK",this.commitButton=r,Polymer.dom.flush(),this.generating=!1,this.validate()},InteractionFormGenerator_2_0_0.prototype.generateId=function(t){},InteractionFormGenerator_2_0_0.prototype.generateTitle=function(t){var e=document.createElement("div");Polymer.dom(this.rootView).appendChild(e),e.innerHTML=t,e.style.paddingBottom="10px",e.style.fontSize="20pt;"},InteractionFormGenerator_2_0_0.prototype.generateStaticText=function(t,e){var o=document.createElement("div");Polymer.dom(this.rootView).appendChild(o),o.innerHTML=e,o.style.maxWidth=this.maxWidth,o.style.paddingTop="12px",this.widgetMap[t]=o},InteractionFormGenerator_2_0_0.prototype.generateTextInput=function(t,e,o){var n=document.createElement("paper-input");Polymer.dom(this.rootView).appendChild(n),n.label=e,n.style.paddingTop="12px";var r;r=o?"password":"text",n.type=r,this.widgetMap[t]=n},InteractionFormGenerator_2_0_0.prototype.generateChoices=function(t,e,o,n,r){var i=document.createElement("div");switch(Polymer.dom(this.rootView).appendChild(i),this.polymer.toggleClass("layout",!0,i),this.polymer.toggleClass("vertical",!0,i),i.style.width="100%",i.style.paddingTop="12px",r){case"radiobutton":case"list-box":default:this.generateRadiobuttonChoices(t,e,o,n,i);break;case"combo-box":case"drop-down-menu":this.generateMenuChoices(t,e,o,n,i)}},InteractionFormGenerator_2_0_0.prototype.generateRadiobuttonChoices=function(t,e,o,n,r){var i=document.createElement("div");Polymer.dom(r).appendChild(i),i.innerHTML=e,i.style.maxWidth=this.maxWidth,i.style.marginBottom="12px",i.style.paddingTop="12px";var a=document.createElement("paper-radio-group");a.id="choice-group",Polymer.dom(r).appendChild(a),a.style.maxWidth=this.maxWidth,this.widgetMap[t]=a;for(var d=o.length,l=0;l<d;l++){var p=o[l],s=document.createElement("paper-radio-button");Polymer.dom(a).appendChild(s),s.id=p.id,s.name=p.id,Polymer.dom(s).textContent=p.label,s.style.paddingLeft="20px",n&&s.id==n&&a.select(p.id),this.widgetMap[p.id]=s}},InteractionFormGenerator_2_0_0.prototype.generateMenuChoices=function(t,e,o,n,r){var i=document.createElement("select");Polymer.dom(r).appendChild(i),i.style.maxWidth=this.maxWidth,i.style.paddingTop="12px",i.label=e,this.widgetMap[t]=i;for(var a=o.length,d=0;d<a;d++){var l=o[d],p=document.createElement("option");Polymer.dom(i).appendChild(p),p.value=l.id,p.text=l.label,n&&p.value==n&&(i.value=p.value),this.widgetMap[l.id]=null}},InteractionFormGenerator_2_0_0.prototype.onButtonClicked=function(t,e){this.fire(this.rootView,"button-clicked")},InteractionFormGenerator_2_0_0.prototype.onKeyUp=function(t){this.onUserInput()},InteractionFormGenerator_2_0_0.prototype.onPaperRadioGroupChanged=function(t){this.onUserInput()},InteractionFormGenerator_2_0_0.prototype.onChange=function(t){this.onUserInput()},InteractionFormGenerator_2_0_0.prototype.onUserInput=function(){this.generating||(this.validate(),this.fire(this.rootView,"entered-data-changed"))},InteractionFormGenerator_2_0_0.prototype.validate=function(){if(null!=this.commitButton){var t=!0;t&&(t=this.allTextInputsValid()),t&&(t=this.allRadiobuttonGroupsValid()),t&&(t=this.allMenusValid()),this.commitButton.disabled=!t}},InteractionFormGenerator_2_0_0.prototype.allTextInputsValid=function(){for(var t=Polymer.dom(this.rootView).querySelectorAll("paper-input"),e=t.length,o=0;o<e;o++){if(0==t[o].value.length)return!1}return!0},InteractionFormGenerator_2_0_0.prototype.allRadiobuttonGroupsValid=function(){for(var t=Polymer.dom(this.rootView).querySelectorAll("#choice-group"),e=t.length,o=0;o<e;o++){for(var n=t[o],r=!1,i=Polymer.dom(n).querySelectorAll("paper-radio-button"),a=i.length,d=0;d<a;d++){if(i[d].checked){r=!0;break}}if(!r)return!1}return!0},InteractionFormGenerator_2_0_0.prototype.allMenusValid=function(){for(var t=Polymer.dom(this.rootView).querySelectorAll("select"),e=t.length,o=0;o<e;o++){if(null==t[o].value)return!1}return!0},InteractionFormGenerator_2_0_0.prototype.fire=function(t,e){var o;document.createEvent?(o=document.createEvent("HTMLEvents"),o.initEvent(e,!0,!0)):(o=document.createEventObject(),o.eventType=e),o.eventName=e,document.createEvent?t.dispatchEvent(o):t.fireEvent("on"+o.eventType,o)};</script>


    
    <script>function InteractionResponseGenerator_2_0_0(e){this.widgetMap=e,this.responseParts=null,this.response=null}InteractionResponseGenerator_2_0_0.prototype.getResponse=function(){return this.response},InteractionResponseGenerator_2_0_0.prototype.begin=function(){this.responseParts=[]},InteractionResponseGenerator_2_0_0.prototype.end=function(){this.response={version:"2.0.0",id:this.requestId.toString(),parts:this.responseParts}},InteractionResponseGenerator_2_0_0.prototype.generateId=function(e){this.requestId=e},InteractionResponseGenerator_2_0_0.prototype.generateTitle=function(e){},InteractionResponseGenerator_2_0_0.prototype.generateStaticText=function(e,t){},InteractionResponseGenerator_2_0_0.prototype.generateTextInput=function(e,t,n){var o=this.widgetMap[e],s=o.value;this.responseParts.push({id:e,value:s})},InteractionResponseGenerator_2_0_0.prototype.generateChoices=function(e,t,n,o,s){this.widgetMap[e];switch(s){case"radiobutton":case"list-box":default:this.generateRadiobuttonChoices(e,t,n);break;case"combo-box":case"drop-down-menu":this.generateMenuChoices(e,t,n)}},InteractionResponseGenerator_2_0_0.prototype.generateRadiobuttonChoices=function(e,t,n){for(var o=(this.widgetMap[e],n.length),s=0;s<o;s++){var r=n[s],i=r.id;if(this.widgetMap[i].checked)return void this.responseParts.push({id:e,value:i})}},InteractionResponseGenerator_2_0_0.prototype.generateMenuChoices=function(e,t,n){var o=this.widgetMap[e],s=o.value;this.responseParts.push({id:e,value:s})};</script>


    

    
    <script>function InteractionRequestParser_1_0_0(){this.generator=null}InteractionRequestParser_1_0_0.prototype.parse=function(e,t){this.generator=t,this.generator.begin(),this.parseTitle(e);for(var r=e.parts.length,a=0;a<r;a++){var i=e.parts[a];switch(i.kind){case"static-text":this.parseStaticText(e,i);break;case"text-input":this.parseTextInput(e,i);break;case"choices":this.parseChoices(e,i)}}this.generator.end()},InteractionRequestParser_1_0_0.prototype.parseTitle=function(e){var t=e.title;this.generator.generateTitle(t)},InteractionRequestParser_1_0_0.prototype.parseStaticText=function(e,t){var r=t.id,a=t.text;this.generator.generateStaticText(r,a)},InteractionRequestParser_1_0_0.prototype.parseTextInput=function(e,t){var r=t.id,a=t.label,i=t.sensitive;this.generator.generateTextInput(r,a,i)},InteractionRequestParser_1_0_0.prototype.parseChoices=function(e,t){var r=t.id,a=t.label,i=t.suggestedWidgetType,s=null;void 0!==t.defaultChoiceId&&(s=t.defaultChoiceId);for(var n=[],o=t.choices.length,c=0;c<o;c++){var p=t.choices[c],h=p.id,u=p.label;n.push({id:h,label:u})}this.generator.generateChoices(r,a,n,s,i)};</script>


    
    <script>function InteractionFormGenerator_1_0_0(t,e,o,n){this.polymer=t,this.rootView=e,this.widgetMap=o,this.maxWidth=n,this.commitButton=null}InteractionFormGenerator_1_0_0.prototype.getResponse=function(){return this.response},InteractionFormGenerator_1_0_0.prototype.clear=function(){this.rootView.removeEventListener("keyup",this.onKeyUp.bind(this)),this.rootView.removeEventListener("paper-radio-group-changed",this.onPaperRadioGroupChanged.bind(this)),this.rootView.removeEventListener("change",this.onChange.bind(this)),this.cancelButton&&(this.cancelButton=null),this.commitButton&&(this.commitButton=null);for(var t=Polymer.dom(this.rootView).lastChild;null!=t;t=Polymer.dom(this.rootView).lastChild)Polymer.dom(this.rootView).removeChild(t);Polymer.dom.flush();for(var e in this.widgetMap)this.widgetMap.hasOwnProperty(e)&&delete this.widgetMap[e]},InteractionFormGenerator_1_0_0.prototype.begin=function(){this.clear(),this.generating=!0,this.rootView.addEventListener("keyup",this.onKeyUp.bind(this)),this.rootView.addEventListener("paper-radio-group-changed",this.onPaperRadioGroupChanged.bind(this)),this.rootView.addEventListener("change",this.onChange.bind(this)),this.rootView.style.minWidth="300px",this.rootView.style.padding="16px"},InteractionFormGenerator_1_0_0.prototype.end=function(){var t=document.createElement("div");Polymer.dom(this.rootView).appendChild(t),this.polymer.toggleClass("layout",!0,t),this.polymer.toggleClass("horizontal",!0,t),t.style.width="100%",t.style.paddingTop="20px";var e=document.createElement("div");Polymer.dom(t).appendChild(e),e.style.width="100%";var o=document.createElement("paper-button");o.addEventListener("click",this.onButtonClicked.bind(this,!0)),Polymer.dom(t).appendChild(o),o.raised=!0,o.style.width="60px",o.style.height="36px",o.style.background="white",Polymer.dom(o).textContent="Cancel",this.cancelButton=o;var n=document.createElement("div");Polymer.dom(t).appendChild(n),n.style.width="20px";var r=document.createElement("paper-button");r.addEventListener("click",this.onButtonClicked.bind(this,!1)),Polymer.dom(t).appendChild(r),r.raised=!0,r.style.width="60px",r.style.height="36px",r.style.background="white",Polymer.dom(r).textContent="OK",this.commitButton=r,Polymer.dom.flush(),this.generating=!1,this.validate()},InteractionFormGenerator_1_0_0.prototype.generateId=function(t){},InteractionFormGenerator_1_0_0.prototype.generateTitle=function(t){var e=document.createElement("div");Polymer.dom(this.rootView).appendChild(e),e.innerHTML=t,e.style.paddingBottom="10px",e.style.fontSize="20pt;"},InteractionFormGenerator_1_0_0.prototype.generateStaticText=function(t,e){var o=document.createElement("div");Polymer.dom(this.rootView).appendChild(o),o.innerHTML=e,o.style.maxWidth=this.maxWidth,o.style.paddingTop="12px",this.widgetMap[t]=o},InteractionFormGenerator_1_0_0.prototype.generateTextInput=function(t,e,o){var n=document.createElement("paper-input");Polymer.dom(this.rootView).appendChild(n),n.label=e,n.style.paddingTop="12px";var r;r=o?"password":"text",n.type=r,this.widgetMap[t]=n},InteractionFormGenerator_1_0_0.prototype.generateChoices=function(t,e,o,n,r){var i=document.createElement("div");switch(Polymer.dom(this.rootView).appendChild(i),this.polymer.toggleClass("layout",!0,i),this.polymer.toggleClass("vertical",!0,i),i.style.width="100%",i.style.paddingTop="12px",r){case"radiobutton":case"list-box":default:this.generateRadiobuttonChoices(t,e,o,n,i);break;case"combo-box":case"drop-down-menu":this.generateMenuChoices(t,e,o,n,i)}},InteractionFormGenerator_1_0_0.prototype.generateRadiobuttonChoices=function(t,e,o,n,r){var i=document.createElement("div");Polymer.dom(r).appendChild(i),i.innerHTML=e,i.style.maxWidth=this.maxWidth,i.style.marginBottom="12px",i.style.paddingTop="12px";var a=document.createElement("paper-radio-group");a.id="choice-group",Polymer.dom(r).appendChild(a),a.style.maxWidth=this.maxWidth,this.widgetMap[t]=a;for(var d=o.length,l=0;l<d;l++){var p=o[l],s=document.createElement("paper-radio-button");Polymer.dom(a).appendChild(s),s.id=p.id,s.name=p.id,Polymer.dom(s).textContent=p.label,s.style.paddingLeft="20px",n&&s.id==n&&a.select(p.id),this.widgetMap[p.id]=s}},InteractionFormGenerator_1_0_0.prototype.generateMenuChoices=function(t,e,o,n,r){var i=document.createElement("select");Polymer.dom(r).appendChild(i),i.style.maxWidth=this.maxWidth,i.style.paddingTop="12px",i.label=e,this.widgetMap[t]=i;for(var a=o.length,d=0;d<a;d++){var l=o[d],p=document.createElement("option");Polymer.dom(i).appendChild(p),p.value=l.id,p.text=l.label,n&&p.value==n&&(i.value=p.value),this.widgetMap[l.id]=null}},InteractionFormGenerator_1_0_0.prototype.onButtonClicked=function(t,e){this.fire(this.rootView,"button-clicked")},InteractionFormGenerator_1_0_0.prototype.onKeyUp=function(t){this.onUserInput()},InteractionFormGenerator_1_0_0.prototype.onPaperRadioGroupChanged=function(t){this.onUserInput()},InteractionFormGenerator_1_0_0.prototype.onChange=function(t){this.onUserInput()},InteractionFormGenerator_1_0_0.prototype.onUserInput=function(){this.generating||(this.validate(),this.fire(this.rootView,"entered-data-changed"))},InteractionFormGenerator_1_0_0.prototype.validate=function(){if(null!=this.commitButton){var t=!0;t&&(t=this.allTextInputsValid()),t&&(t=this.allRadiobuttonGroupsValid()),t&&(t=this.allMenusValid()),this.commitButton.disabled=!t}},InteractionFormGenerator_1_0_0.prototype.allTextInputsValid=function(){for(var t=Polymer.dom(this.rootView).querySelectorAll("paper-input"),e=t.length,o=0;o<e;o++){if(0==t[o].value.length)return!1}return!0},InteractionFormGenerator_1_0_0.prototype.allRadiobuttonGroupsValid=function(){for(var t=Polymer.dom(this.rootView).querySelectorAll("#choice-group"),e=t.length,o=0;o<e;o++){for(var n=t[o],r=!1,i=Polymer.dom(n).querySelectorAll("paper-radio-button"),a=i.length,d=0;d<a;d++){if(i[d].checked){r=!0;break}}if(!r)return!1}return!0},InteractionFormGenerator_1_0_0.prototype.allMenusValid=function(){for(var t=Polymer.dom(this.rootView).querySelectorAll("select"),e=t.length,o=0;o<e;o++){if(null==t[o].value)return!1}return!0},InteractionFormGenerator_1_0_0.prototype.fire=function(t,e){var o;document.createEvent?(o=document.createEvent("HTMLEvents"),o.initEvent(e,!0,!0)):(o=document.createEventObject(),o.eventType=e),o.eventName=e,document.createEvent?t.dispatchEvent(o):t.fireEvent("on"+o.eventType,o)};</script>


    
    <script>function InteractionResponseGenerator_1_0_0(e){this.widgetMap=e,this.responseParts=null,this.response=null}InteractionResponseGenerator_1_0_0.prototype.getResponse=function(){return this.response},InteractionResponseGenerator_1_0_0.prototype.begin=function(){this.responseParts=[]},InteractionResponseGenerator_1_0_0.prototype.end=function(){this.response={version:"1.0.0",id:this.requestId.toString(),parts:this.responseParts}},InteractionResponseGenerator_1_0_0.prototype.generateId=function(e){this.requestId=e},InteractionResponseGenerator_1_0_0.prototype.generateTitle=function(e){},InteractionResponseGenerator_1_0_0.prototype.generateStaticText=function(e,t){},InteractionResponseGenerator_1_0_0.prototype.generateTextInput=function(e,t,n){var o=this.widgetMap[e],s=o.value;this.responseParts.push({id:e,value:s})},InteractionResponseGenerator_1_0_0.prototype.generateChoices=function(e,t,n,o,s){this.widgetMap[e];switch(s){case"radiobutton":case"list-box":default:this.generateRadiobuttonChoices(e,t,n);break;case"combo-box":case"drop-down-menu":this.generateMenuChoices(e,t,n)}},InteractionResponseGenerator_1_0_0.prototype.generateRadiobuttonChoices=function(e,t,n){for(var o=(this.widgetMap[e],n.length),s=0;s<o;s++){var r=n[s],i=r.id;if(this.widgetMap[i].checked)return void this.responseParts.push({id:e,value:i})}},InteractionResponseGenerator_1_0_0.prototype.generateMenuChoices=function(e,t,n){var o=this.widgetMap[e],s=o.value;this.responseParts.push({id:e,value:s})};</script>


    <script>Polymer({is:"ft-user-interaction-form",properties:{version:{type:String,notify:!0,value:"2.0.0",observer:"_onVersionChanged"},request:{type:String,notify:!0,value:null,observer:"_onRequestChanged"},response:{type:String,notify:!0,value:null,observer:"_onResponseChanged"}},_requestParser:null,_formGenerator:null,_responseGenerator:null,_widgetMap:{},_onVersionChanged:function(){switch(this.version){case"1.0.0":this._requestParser=new InteractionRequestParser_1_0_0,this._formGenerator=new InteractionFormGenerator_1_0_0(this,this.$.form,this._widgetMap,"325px"),this._responseGenerator=new InteractionResponseGenerator_1_0_0(this._widgetMap);break;case"2.0.0":this._requestParser=new InteractionRequestParser_2_0_0,this._formGenerator=new InteractionFormGenerator_2_0_0(this,this.$.form,this._widgetMap,"325px"),this._responseGenerator=new InteractionResponseGenerator_2_0_0(this._widgetMap);break;default:throw new IllegalArgumentException("Unknown user interaction schema version: "+this.version)}},_onRequestChanged:function(){this._generateForm(),this._clearResponse(),this.fire("requestChanged")},_onResponseChanged:function(){this.fire("responseChanged")},_clearResponse:function(){this.response=null},_generateForm:function(){null!=this._formGenerator&&(null==this.request?this._formGenerator.clear():this._requestParser.parse(this.request,this._formGenerator))},generateResponse:function(){null!=this._responseGenerator&&(this._requestParser.parse(this.request,this._responseGenerator),this.response=this._responseGenerator.getResponse())},_onEnteredDataChanged:function(e){this.fire("enteredDataChanged")},_onButtonClicked:function(e,n){this.generateResponse(),this.fire("buttonClicked")}});</script>

</dom-module>
</body></html>